.root {
  --cardW: clamp(180px, 25vw, 320px);
  perspective: 1200px;
  padding: 1rem 0.5rem; 
  outline: none;
  position: relative;
  width: 100%;
  max-width: 100vw;
  overflow: hidden;
}

.track {
  position: relative;
  height: calc(var(--cardW) * 16 / 9);
  transform-style: preserve-3d;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  width: 100%;
  max-width: calc(100vw - 2rem);
}

.card {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--cardW);
  aspect-ratio: 9 / 16;
  border-radius: 16px;
  background: radial-gradient(120% 140% at 50% 0%, rgba(255,255,255,.10), rgba(0,0,0,.20) 60%);
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  border: 1px solid rgba(255,255,255,.18);
  overflow: hidden;
  transition: transform 400ms cubic-bezier(.22,.61,.36,1), filter 400ms, box-shadow 400ms;
  cursor: pointer;
  padding: 0;
  outline: none;
  will-change: transform, filter;
  backface-visibility: hidden;
}

.card:focus-visible {
  outline: 2px solid #8ab4ff;
  outline-offset: 2px;
}

.active {
  box-shadow: 0 28px 80px rgba(0,0,0,.45), 0 0 0 2px rgba(138,180,255,.35) inset;
  filter: blur(0px) !important; /* Override blur for active card */
}

.cardInner {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  border-radius: inherit;
}

.player {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
  background: #000;
  border-radius: inherit; /* round the iframe corners */
}

.iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
  background: #000;
  border-radius: inherit; /* round the iframe corners */
}

.dots {
  margin-top: 1rem;
}

.dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin: 0 6px;
  background: rgba(255, 255, 255, 0.3);
  border: 2px solid rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
  padding: 0;
  outline: none;
}

.dot:hover {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(255, 255, 255, 0.8);
  transform: scale(1.1);
}

.dot:focus-visible {
  outline: 2px solid #8ab4ff;
  outline-offset: 2px;
}

.dotActive {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(255, 255, 255, 1);
  transform: scale(1.2);
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
}

/* Enhanced responsive adjustments */
@media (max-width: 768px) {
  .root {
    --cardW: clamp(140px, 30vw, 220px);
    padding: 0.5rem 0.25rem;
    perspective: 800px;
  }
  
  .track {
    height: calc(var(--cardW) * 16 / 9);
    max-width: calc(100vw - 1rem);
  }
  
  .card {
    border-radius: 12px;
  }
  
  .cardInner, .iframe, .player {
    border-radius: 12px;
  }
  
  .dots {
    margin-top: 0.75rem;
  }
  
  .dot {
    width: 10px;
    height: 10px;
    margin: 0 4px;
  }
}

@media (max-width: 480px) {
  .root {
    --cardW: clamp(120px, 35vw, 180px);
    padding: 0.25rem;
    perspective: 600px;
  }
  
  .track {
    max-width: calc(100vw - 0.5rem);
  }
  
  .card {
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  
  .cardInner, .iframe, .player {
    border-radius: 10px;
  }
  
  .active {
    box-shadow: 0 15px 40px rgba(0,0,0,.45), 0 0 0 1px rgba(138,180,255,.35) inset;
  }
  
  .dots {
    margin-top: 0.5rem;
  }
  
  .dot {
    width: 8px;
    height: 8px;
    margin: 0 3px;
  }
  
  .dotActive {
    transform: scale(1.3);
  }
}

@media (max-width: 360px) {
  .root {
    --cardW: clamp(100px, 40vw, 160px);
    padding: 0.125rem;
    perspective: 500px;
  }
  
  .track {
    max-width: calc(100vw - 0.25rem);
  }
  
  .card {
    border-radius: 8px;
  }
  
  .cardInner, .iframe, .player {
    border-radius: 8px;
  }
  
  .dots {
    margin-top: 0.25rem;
  }
  
  .dot {
    width: 6px;
    height: 6px;
    margin: 0 2px;
  }
}

/* Ensure no global CSS leakage */
.root * {
  box-sizing: border-box;
}

/* Make side cards clickable on touch devices */
@media (hover: none) {
  .card {
    pointer-events: auto !important;
  }
}
